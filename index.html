<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sports Day 2025</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="sports medal back.png" type="image/x-icon">
</head> 

<script type="module">

    // Import the functions you need from the SDKs you need
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
import { getDatabase, ref, onValue, update } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-database.js";

  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyB3E91VEHJtWqV3zItY3iL2hI_wfOoH9FA",
    authDomain: "sportsdayjr.firebaseapp.com",
    databaseURL: "https://sportsdayjr-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "sportsdayjr",
    storageBucket: "sportsdayjr.firebasestorage.app",
    messagingSenderId: "79871043442",
    appId: "1:79871043442:web:6a5095d403ee4494169feb",
    measurementId: "G-D9GF193J5C"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const db  = getDatabase(app);

const eventsRef = ref(db, "events");
const housesRef = ref(db, "houses");

/* -------------------- 2) Auto Score Calculator (SAFE) --------------------- */

/* -------------------- FIXED AUTO SCORE CALCULATOR --------------------- */
// onValue(eventsRef, (snap) => {
//   if (!snap.exists()) return;

//   const events = snap.val();

//   const totals = { savio: 0, bosco: 0, rua: 0, francis: 0 };

//   Object.values(events).forEach(group => {

//     // skip empty groups or bad data
//     if (!group || typeof group !== "object") return;

//     Object.values(group)
//       .filter(item => item && typeof item === "object")   // FIX: ignore nulls
//       .forEach(entry => {

//         const house = (entry.house || "").trim().toLowerCase();
//         const pts   = Number(entry.points) || 0;

//         if (house in totals) {
//           totals[house] += pts;
//         }

//       });
//   });

//   // write FINAL score only once
//   update(housesRef, totals);
// });

/* -------------------- 3) Live Curtain Box Scores --------------------- */

const curtain = {
  savio:   document.querySelector("#curt1 .box h1"),
  bosco:   document.querySelector("#curt2 .box h1"),
  rua:     document.querySelector("#curt3 .box h1"),
  francis: document.querySelector("#curt4 .box h1")
};

onValue(housesRef, (snap) => {
  if (!snap.exists()) return;
  const d = snap.val();

  curtain.savio.textContent   = d.savio ?? 0;
  curtain.bosco.textContent   = d.bosco ?? 0;
  curtain.rua.textContent     = d.rua ?? 0;
  curtain.francis.textContent = d.francis ?? 0;
});

/* -------------------- 4) Table Loader (Top 3 Only + Correct Order) --------------------- */

// const orderKeys = [
//   "100m_DivE","100m_DivD","100m_DivC","100m_DivB","100m_DivA",
//   "200m_DivE","200m_DivD","200m_DivC","200m_DivB","200m_DivA",
//   "400m_DivE","400m_DivD","400m_DivC",
//   "800m_DivB","800m_DivA",
//   "TunnelBall_CD&E",
//   "Hurdle_B","Hurdle_A",
//   "Obstacle_E","Obstacle_D","Obstacle_C",
//   "HighJump_D","HighJump_C","HighJump_B","HighJump_A",
//   "LongJump_E","LongJump_D","LongJump_C","LongJump_B","LongJump_A",
//   "Javelin_B","Javelin_A",
//   "TugOfWar_A&B",
//   "Relay_C","Relay_CD&E","Relay_A&B"
// ];

// const tbody = document.getElementById("tableBody");

// onValue(eventsRef, (snap) => {
//   tbody.innerHTML = "";
//   if (!snap.exists()) return;

//   const events = snap.val();
//   const rows = [];

//   orderKeys.forEach(key => {
//     const group = events[key];
//     if (!group) return;

//     Object.values(group)
//       .filter(r => Number(r.position) <= 3) // ONLY TOP 3
//       .forEach(r => {
//         rows.push(`
//           <tr>
//             <td>${r.position}</td>
//             <td>${r.eventName}</td>
//             <td>${r.house}</td>
//             <td>${r.name}</td>
//             <td>${r.points}</td>
//           </tr>
//         `);
//       });
//   });

//   tbody.innerHTML = rows.join("");
// });
</script>


<body>
<nav class="navbar">
  <div class="nav-left">
    <div class="nav-logo">SPORTS DAY</div>
  </div>

  <div class="nav-links" id="navLinks">
    <a href="#" class="nav-item">Home</a>
    <a href="about.html" class="nav-item">About Us</a>
  </div>

  <div class="burger" id="burgerBtn">
    â˜°
  </div>
</nav>
    <script>
  const burgerBtn = document.getElementById("burgerBtn");
  const navLinks = document.getElementById("navLinks");

  burgerBtn.addEventListener("click", () => {
    navLinks.classList.toggle("open");
  });
</script>

    <div class="firstPage">
    <div class="contain">
        <div class="cEl" id="curt1">
            <div class="curtain" id="savio">
                <div class="box"><h1>1</h1></div>
            </div>
            <div class="triangle" id="savio" role="img" aria-hidden="true"></div>
            <h1 class="nameTxt" id="savioHead" >SAVIO</h1>
        </div>
        <div class="cEl" id="curt2">
            <div class="curtain" id="bosco">
                <div class="box"><h1>2</h1></div>
            </div>
            <div class="triangle" id="bosco"></div>
            <h1 class="nameTxt" id="boscoHead">BOSCO</h1>
        </div>

        <div class="logoMain">
            <img src="sports medal back.png" alt="School logo" class="logoDBPC">
        </div>

        <div class="cEl" id="curt3">
            <div class="curtain" id="rua">
                <div class="box"><h1>3</h1></div>
            </div>
            <div class="triangle" id="rua"></div>
            <h1 class="nameTxt" id="ruaHead">RUA</h1>
        </div>
        <div class="cEl" id="curt4">
            <div class="curtain" id="francis">
                <div class="box"><h1>4</h1></div>
            </div>
            <div class="triangle" id="francis"></div>
            <h1 class="nameTxt" id="francisHead">FRANCIS</h1>
        </div>
    </div>

    
        <div class="logoDummy">
            <img src="sports medal back.png" alt="School logo" class="logoDBPC">
        </div>

        <div class="para">
            <p class="paraText">DBPC (Don Bosco Park Circus) Sports Day is an annual event that embodies the spirit of sportsmanship and camaraderie among students. The event typically features a variety of athletic competitions, including track and field events, relays, and team sports. Students of all ages participate, showcasing their talents and determination. The day begins with a colorful parade, where students march proudly representing their respective houses. The ceremony provides motivation to all students to proceed with a sportman's spirit.
            </p>
        </div>

    </div>
<!-- <div class="secondPage">
<table id="standingsTable">
    <caption>SCOREBOARD</caption>
    <thead>
      <tr>
        <th>Position</th>
        <th>Event Name</th>
        <th>House</th>
        <th>Name</th>
        <th>Points</th>
      </tr>
    </thead>
    <tbody id="tableBody"></tbody>
</table>
</div>


</body>
</html> -->